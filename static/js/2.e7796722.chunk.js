/*! For license information please see 2.e7796722.chunk.js.LICENSE.txt */
(self.webpackChunk_kne_components_components_field=self.webpackChunk_kne_components_components_field||[]).push([[2,139],{7002:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var n=t(3050),o=t(5199),l=t(3884),s=t(8139),c=t.n(s);const i="style_row-disabled__EFGvs__5CHd6";var a=t(579);const u=(0,n.createWithRemoteLoader)({modules:["Table@TablePage","ConfirmButton","Common@SearchInput"]})((0,l.forwardRef)(((e,r)=>{let{remoteModules:t,searchRender:n,defaultValue:s,labelKey:u,getCheckboxDisabled:d,...f}=e;const[p,h,y]=t,[x,b]=(0,l.useState)(s||[]),[_,m]=(0,l.useState)(0),v=(0,l.useRef)(null),w=(0,l.useRef)(null),[g,j]=(0,l.useState)("");(0,l.useEffect)((()=>{const e=v.current;m(e.clientHeight);const r=new ResizeObserver((()=>{m(e.clientHeight)}));return r.observe(e),()=>{r.unobserve(e)}}),[]);const C=e=>"function"===typeof f.rowKey?f.rowKey(e):e[f.rowKey];(0,l.useImperativeHandle)(r,(()=>({getValue:()=>x})),[x]);const S=e=>"function"===typeof d?d(e):e.disabled;return(0,a.jsxs)(o.Row,{wrap:!1,gutter:10,children:[(0,a.jsx)(o.Col,{span:18,children:(0,a.jsxs)(o.Space,{direction:"vertical",block:!0,size:_?8:0,children:[(0,a.jsx)("div",{ref:v,children:n&&n({value:x,setValue:b,getFetchApi:()=>w.current})}),(0,a.jsx)(p,{...f,ref:w,controllerOpen:!1,scroll:{y:`calc(var(--modal-height) - 152px - ${_?_+8:0}px)`},rowClassName:e=>c()({[i]:S(e)}),rowSelection:{selectedRowKeys:x.map(C),getCheckboxProps:e=>({disabled:S(e)}),renderCell:(e,r)=>{const t=C(r);return(0,a.jsx)(o.Checkbox,{checked:e,disabled:S(r),onChange:()=>{b((n=>{const o=n.slice(0),l=o.findIndex((e=>C(e)===t));return e?l>-1&&o.splice(l,1):l>-1?o.splice(l,1,r):o.push(r),o}))}})},onSelectAll:(e,r,t)=>{b((r=>e?r.concat(t):r.filter((e=>-1===t.findIndex((r=>C(r)===C(e)))))))}}})]})}),(0,a.jsx)(o.Col,{span:6,children:(0,a.jsxs)(o.Space,{direction:"vertical",block:!0,children:[(0,a.jsxs)(o.Row,{justify:"space-between",children:[(0,a.jsxs)(o.Col,{children:["\u5df2\u9009:",x&&x.length>0?`(${x.length})`:""]}),(0,a.jsx)(o.Col,{children:(0,a.jsx)(h,{isDelete:!0,type:"text",size:"small",disabled:!(x&&x.length>0),onClick:()=>{b([])},children:"\u5168\u90e8\u79fb\u9664"})})]}),(0,a.jsx)(y,{value:g,placeholder:"\u641c\u7d22",onSearch:e=>{j(e)}}),(0,a.jsx)(o.Space,{wrap:!0,children:x.filter((e=>!g||("function"===typeof u?u(e):e[u]).indexOf(g)>-1)).map((e=>(0,a.jsx)(o.Tag,{closable:!0,onClose:()=>{b((r=>{const t=r.slice(0),n=t.indexOf(e);return n>-1&&t.splice(n,1),t}))},children:"function"===typeof u?u(e):e[u]},"function"===typeof f.rowKey?f.rowKey(e):e[f.rowKey])))})]})})]})})));u.defaultProps={rowKey:"id",labelKey:"name"};const d=(0,n.createWithRemoteLoader)({modules:["Modal@useModal"]})((e=>{let{remoteModules:r,children:t,...n}=e;const[o]=r,s=(0,l.useRef)(null),c=o();return t({modal:e=>{let{onConfirm:r,defaultValue:t,...o}=e;return c(Object.assign({},o,{children:(0,a.jsx)(u,{...n,defaultValue:t,ref:s}),onConfirm:()=>r&&r(s.current.getValue())}))}})}))},1153:(e,r,t)=>{"use strict";var n=t(3884),o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(e,r,t){var n,l={},a=null,u=null;for(n in void 0!==t&&(a=""+t),void 0!==r.key&&(a=""+r.key),void 0!==r.ref&&(u=r.ref),r)s.call(r,n)&&!i.hasOwnProperty(n)&&(l[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===l[n]&&(l[n]=r[n]);return{$$typeof:o,type:e,key:a,ref:u,props:l,_owner:c.current}}r.jsx=a,r.jsxs=a},579:(e,r,t)=>{"use strict";e.exports=t(1153)},8139:(e,r)=>{var t;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",r=0;r<arguments.length;r++){var t=arguments[r];t&&(e=s(e,l(t)))}return e}function l(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var t in e)n.call(e,t)&&e[t]&&(r=s(r,t));return r}function s(e,r){return r?e?e+" "+r:e+r:e}e.exports?(o.default=o,e.exports=o):void 0===(t=function(){return o}.apply(r,[]))||(e.exports=t)}()}}]);
//# sourceMappingURL=2.e7796722.chunk.js.map