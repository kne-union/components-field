{"version":3,"file":"static/js/2.13d8c55f.chunk.js","mappings":"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","sources":["webpack://@kne-components/components-field/./src/components/SelectModal/style.module.scss?8e49","components/SelectModal/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js","../node_modules/classnames/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"row-disabled\":\"style_row-disabled__EFGvs__eG6z4\"};","import { createWithRemoteLoader } from '@kne/remote-loader';\nimport { Row, Col, Space, Tag, Checkbox } from 'antd';\nimport { useState, useEffect, forwardRef, useImperativeHandle, useRef } from 'react';\nimport classnames from 'classnames';\n\nimport style from './style.module.scss';\n\nconst ModalInner = createWithRemoteLoader({\n  modules: ['Table@TablePage', 'ConfirmButton', 'Common@SearchInput']\n})(\n  forwardRef(({ remoteModules, searchRender, defaultValue, labelKey, getCheckboxDisabled, ...props }, ref) => {\n    const [TablePage, ConfirmButton, SearchInput] = remoteModules;\n    const [value, setValue] = useState(defaultValue || []);\n    const [searchHeight, setSearchHeight] = useState(0);\n    const searchRef = useRef(null);\n    const tableRef = useRef(null);\n    const [searchText, setSearchText] = useState('');\n    useEffect(() => {\n      const searchEl = searchRef.current;\n      setSearchHeight(searchEl.clientHeight);\n      const resizeObserver = new ResizeObserver(() => {\n        setSearchHeight(searchEl.clientHeight);\n      });\n      resizeObserver.observe(searchEl);\n      return () => {\n        resizeObserver.unobserve(searchEl);\n      };\n    }, []);\n    const getRowValue = item => (typeof props.rowKey === 'function' ? props.rowKey(item) : item[props.rowKey]);\n    useImperativeHandle(\n      ref,\n      () => {\n        return {\n          getValue: () => value\n        };\n      },\n      [value]\n    );\n\n    const rowIsDisabled = record => (typeof getCheckboxDisabled === 'function' ? getCheckboxDisabled(record) : record.disabled);\n    return (\n      <Row wrap={false} gutter={10}>\n        <Col span={18}>\n          <Space direction=\"vertical\" block size={searchHeight ? 8 : 0}>\n            <div ref={searchRef}>\n              {searchRender &&\n                searchRender({\n                  value,\n                  setValue,\n                  getFetchApi: () => tableRef.current\n                })}\n            </div>\n            <TablePage\n              {...props}\n              ref={tableRef}\n              controllerOpen={false}\n              scroll={{\n                y: `calc(var(--modal-height) - 152px - ${searchHeight ? searchHeight + 8 : 0}px)`\n              }}\n              rowClassName={record => {\n                return classnames({\n                  [style['row-disabled']]: rowIsDisabled(record)\n                });\n              }}\n              rowSelection={{\n                selectedRowKeys: value.map(getRowValue),\n                getCheckboxProps: record => {\n                  return {\n                    disabled: rowIsDisabled(record)\n                  };\n                },\n                renderCell: (checked, record) => {\n                  const recordKey = getRowValue(record);\n                  return (\n                    <Checkbox\n                      checked={checked}\n                      disabled={rowIsDisabled(record)}\n                      onChange={() => {\n                        setValue(value => {\n                          const newValue = value.slice(0);\n                          const index = newValue.findIndex(item => getRowValue(item) === recordKey);\n                          if (!checked) {\n                            index > -1 ? newValue.splice(index, 1, record) : newValue.push(record);\n                          } else {\n                            index > -1 && newValue.splice(index, 1);\n                          }\n                          return newValue;\n                        });\n                      }}\n                    />\n                  );\n                },\n                onSelectAll: (selected, selectedRows, changeRows) => {\n                  setValue(value => {\n                    return selected ? value.concat(changeRows) : value.filter(item => changeRows.findIndex(target => getRowValue(target) === getRowValue(item)) === -1);\n                  });\n                }\n              }}\n            />\n          </Space>\n        </Col>\n        <Col span={6}>\n          <Space direction=\"vertical\" block>\n            <Row justify=\"space-between\">\n              <Col>已选:{value && value.length > 0 ? `(${value.length})` : ''}</Col>\n              <Col>\n                <ConfirmButton\n                  isDelete\n                  type=\"text\"\n                  size=\"small\"\n                  disabled={!(value && value.length > 0)}\n                  onClick={() => {\n                    setValue([]);\n                  }}\n                >\n                  全部移除\n                </ConfirmButton>\n              </Col>\n            </Row>\n            <SearchInput\n              value={searchText}\n              placeholder=\"搜索\"\n              onSearch={value => {\n                setSearchText(value);\n              }}\n            />\n            <Space wrap>\n              {value\n                .filter(item => !searchText || (typeof labelKey === 'function' ? labelKey(item) : item[labelKey]).indexOf(searchText) > -1)\n                .map(item => (\n                  <Tag\n                    closable\n                    onClose={() => {\n                      setValue(value => {\n                        const newValue = value.slice(0);\n                        const index = newValue.indexOf(item);\n                        if (index > -1) {\n                          newValue.splice(index, 1);\n                        }\n                        return newValue;\n                      });\n                    }}\n                    key={typeof props.rowKey === 'function' ? props.rowKey(item) : item[props.rowKey]}\n                  >\n                    {typeof labelKey === 'function' ? labelKey(item) : item[labelKey]}\n                  </Tag>\n                ))}\n            </Space>\n          </Space>\n        </Col>\n      </Row>\n    );\n  })\n);\n\nModalInner.defaultProps = {\n  rowKey: 'id',\n  labelKey: 'name'\n};\n\nconst SelectModal = createWithRemoteLoader({\n  modules: ['Modal@useModal']\n})(({ remoteModules, children, ...props }) => {\n  const [useModal] = remoteModules;\n  const ref = useRef(null);\n  const modal = useModal();\n  return children({\n    modal: ({ onConfirm, defaultValue, ...modalProps }) =>\n      modal(\n        Object.assign({}, modalProps, {\n          children: <ModalInner {...props} defaultValue={defaultValue} ref={ref} />,\n          onConfirm: () => {\n            return onConfirm && onConfirm(ref.current.getValue());\n          }\n        })\n      )\n  });\n});\n\nexport default SelectModal;\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":["ModalInner","createWithRemoteLoader","modules","forwardRef","_ref","ref","remoteModules","searchRender","defaultValue","labelKey","getCheckboxDisabled","props","TablePage","ConfirmButton","SearchInput","value","setValue","useState","searchHeight","setSearchHeight","searchRef","useRef","tableRef","searchText","setSearchText","useEffect","searchEl","current","clientHeight","resizeObserver","ResizeObserver","observe","unobserve","getRowValue","item","rowKey","useImperativeHandle","getValue","rowIsDisabled","record","disabled","_jsxs","Row","wrap","gutter","children","_jsx","Col","span","Space","direction","block","size","getFetchApi","controllerOpen","scroll","y","concat","rowClassName","classnames","style","rowSelection","selectedRowKeys","map","getCheckboxProps","renderCell","checked","recordKey","Checkbox","onChange","newValue","slice","index","findIndex","splice","push","onSelectAll","selected","selectedRows","changeRows","filter","target","justify","length","isDelete","type","onClick","placeholder","onSearch","indexOf","Tag","closable","onClose","defaultProps","_ref2","useModal","modal","_ref3","onConfirm","modalProps","Object","assign","f","require","k","Symbol","for","l","m","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","__self","__source","q","c","a","g","b","d","e","h","call","$$typeof","_owner","exports","jsx","jsxs","module","hasOwn","classNames","classes","i","arguments","arg","appendClass","parseValue","Array","isArray","apply","toString","includes","newClass","default"],"sourceRoot":""}